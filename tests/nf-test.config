/*
 * =============================================================================
 * nf-test Configuration File
 * =============================================================================
 *
 * PURPOSE:
 * This file configures the nf-test framework for automated pipeline testing.
 * nf-test is the industry-standard testing framework for Nextflow pipelines.
 *
 * WHY TESTING MATTERS IN BIOINFORMATICS:
 * 1. Scientific Reproducibility: Ensures results are consistent across runs
 * 2. Regression Prevention: Catches bugs introduced by code changes
 * 3. Confidence in Deployment: Validates pipeline before production use
 * 4. Regulatory Compliance: Required for clinical/FDA-regulated pipelines
 *
 * =============================================================================
 */

config {
    /*
     * -------------------------------------------------------------------------
     * Test Directory Configuration
     * -------------------------------------------------------------------------
     * WHERE: Specifies where test files are located
     * WHY: Keeps tests organized and separate from production code
     */
    testsDir "."
    
    /*
     * -------------------------------------------------------------------------
     * Working Directory
     * -------------------------------------------------------------------------
     * WHERE: Temporary directory for test execution
     * WHY: Isolates test runs from each other and from production data
     */
    workDir ".nf-test"
    
    /*
     * -------------------------------------------------------------------------
     * Configuration Files
     * -------------------------------------------------------------------------
     * WHAT: Points to the main Nextflow configuration
     * WHY: Tests should use the same configuration as production
     */
    configFile "../workflows/nextflow.config"
    
    /*
     * -------------------------------------------------------------------------
     * Default Profile
     * -------------------------------------------------------------------------
     * WHAT: The Nextflow profile to use for tests
     * WHY: Docker profile ensures consistent environment across machines
     *
     * BEST PRACTICE: Always use containers for testing to ensure reproducibility
     */
    profile "docker,test"
    
    /*
     * -------------------------------------------------------------------------
     * Plugins
     * -------------------------------------------------------------------------
     * WHAT: nf-test plugins to enable additional functionality
     */
    plugins {
        // Enable snapshot testing for output comparison
        load "nf-test-snapshot@0.1.0"
    }
}

/*
 * =============================================================================
 * TEST ORGANIZATION
 * =============================================================================
 *
 * Our tests are organized into three levels:
 *
 * 1. UNIT TESTS (tests/unit/)
 *    - Test individual Nextflow processes in isolation
 *    - Fast to run, easy to debug
 *    - Example: Test that FASTQC produces expected output format
 *
 * 2. INTEGRATION TESTS (tests/integration/)
 *    - Test interactions between multiple processes
 *    - Verify data flows correctly through the pipeline
 *    - Example: Test that STAR output is compatible with Salmon input
 *
 * 3. END-TO-END TESTS (tests/e2e/)
 *    - Test the complete pipeline from start to finish
 *    - Use realistic (but small) test datasets
 *    - Verify final outputs match expected results
 *
 * =============================================================================
 */
